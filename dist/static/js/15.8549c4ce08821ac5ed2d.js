webpackJsonp([15],{"7Zn1":function(e,a){},YqCq:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Xxa5"),o=t.n(r),l=t("exGp"),s=t.n(l),n=t("ON3O"),p=t.n(n),c=t("X2Oc"),i={props:{ifshow:Boolean},data:function(){return{appPatchVersionInitForm:{appName:"",versionCode:"",versionName:"",channel:"",validateFrom:"",clientType:"",baseVersion:"",patchVersion:"",remark:"",patchUrl:"",patchEncryption:"",status:""},appPatchVersionForm:{},rules:{},uploadAppPatchUrl:"//devfdd.51huihuahua.com/app-patch-version/upload-app-path-file"}},methods:{openDialog:function(){this.appPatchVersionForm=Object(c.a)(this.appPatchVersionInitForm)},closeDialog:function(){this.$refs.appPatchVersionForm.resetFields(),this.$emit("handleCloseDialog")},handleFilesChange:function(e,a){a.length>1&&a.shift(),"ready"!==e.status&&("success"===e.status&&"200"===e.response.code?(this.appPatchVersionForm.patchUrl=e.response.data.patchUrl,this.appPatchVersionForm.patchEncryption=e.response.data.patchEncryption,this.$message({message:"上传成功",type:"success"})):this.$message.error("上传失败"))},save:p()(300,function(){var e,a=this;this.$refs.appPatchVersionForm.validate((e=s()(o.a.mark(function e(t){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.prev=1,e.next=4,a.$http.post("/app-patch-version",a.appPatchVersionForm);case 4:"200"===(r=e.sent).code?(a.$message.success("保存成功!"),a.closeDialog()):a.$message.error(r.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}},e,a,[[1,8]])})),function(a){return e.apply(this,arguments)}))})}},m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"border",staticStyle:{width:"100%"}},[t("el-dialog",{attrs:{title:"新增",visible:e.ifshow,"before-close":e.closeDialog},on:{"update:visible":function(a){e.ifshow=a},open:e.openDialog}},[t("el-form",{ref:"appPatchVersionForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.appPatchVersionForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"APP名称"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.appPatchVersionForm.appName,callback:function(a){e.$set(e.appPatchVersionForm,"appName",a)},expression:"appPatchVersionForm.appName"}},e._l(e.$formatter.getSelectionOptions("appNames"),function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"版本代号"}},[t("el-input",{attrs:{clearable:"",placeholder:"版本代号"},model:{value:e.appPatchVersionForm.versionCode,callback:function(a){e.$set(e.appPatchVersionForm,"versionCode",a)},expression:"appPatchVersionForm.versionCode"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"版本名字"}},[t("el-input",{attrs:{clearable:"",placeholder:"版本名字"},model:{value:e.appPatchVersionForm.versionName,callback:function(a){e.$set(e.appPatchVersionForm,"versionName",a)},expression:"appPatchVersionForm.versionName"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"发布渠道"}},[t("el-input",{attrs:{clearable:"",placeholder:"发布渠道"},model:{value:e.appPatchVersionForm.channel,callback:function(a){e.$set(e.appPatchVersionForm,"channel",a)},expression:"appPatchVersionForm.channel"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"生效时间"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择生效时间","value-format":"yyyy-MM-dd hh:mm:ss"},model:{value:e.appPatchVersionForm.validateFrom,callback:function(a){e.$set(e.appPatchVersionForm,"validateFrom",a)},expression:"appPatchVersionForm.validateFrom"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"平台类型"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.appPatchVersionForm.clientType,callback:function(a){e.$set(e.appPatchVersionForm,"clientType",a)},expression:"appPatchVersionForm.clientType"}},e._l(e.$formatter.getSelectionOptions("clientType"),function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"基线版本"}},[t("el-input",{attrs:{clearable:"",placeholder:"基线版本"},model:{value:e.appPatchVersionForm.baseVersion,callback:function(a){e.$set(e.appPatchVersionForm,"baseVersion",a)},expression:"appPatchVersionForm.baseVersion"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"补丁版本"}},[t("el-input",{attrs:{clearable:"",placeholder:"补丁版本"},model:{value:e.appPatchVersionForm.patchVersion,callback:function(a){e.$set(e.appPatchVersionForm,"patchVersion",a)},expression:"appPatchVersionForm.patchVersion"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"补丁说明"}},[t("el-input",{staticStyle:{width:"675px"},attrs:{clearable:"",placeholder:"补丁说明"},model:{value:e.appPatchVersionForm.remark,callback:function(a){e.$set(e.appPatchVersionForm,"remark",a)},expression:"appPatchVersionForm.remark"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.appPatchVersionForm.state,callback:function(a){e.$set(e.appPatchVersionForm,"state",a)},expression:"appPatchVersionForm.state"}},e._l(e.$formatter.getSelectionOptions("state"),function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"补丁地址"}},[t("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadAppPatchUrl,"on-change":e.handleFilesChange,"show-file-list":!1}},[t("el-input",{attrs:{readonly:"",clearable:"",placeholder:"补丁地址","suffix-icon":"el-icon-circle-plus"},model:{value:e.appPatchVersionForm.patchUrl,callback:function(a){e.$set(e.appPatchVersionForm,"patchUrl",a)},expression:"appPatchVersionForm.patchUrl"}})],1),e._v(" "),t("el-input",{attrs:{type:"hidden"},model:{value:e.appPatchVersionForm.patchEncryption,callback:function(a){e.$set(e.appPatchVersionForm,"patchEncryption",a)},expression:"appPatchVersionForm.patchEncryption"}})],1)],1)],1),e._v(" "),t("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"center"}},[t("el-col",{attrs:{span:40}},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:e.closeDialog}},[e._v("返回")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var h=t("VU/8")(i,m,!1,function(e){t("7Zn1")},null,null);a.default=h.exports}});
//# sourceMappingURL=15.8549c4ce08821ac5ed2d.js.map